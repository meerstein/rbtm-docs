Документация к WEB-интерфейсу
=============================

Введение
~~~~~~~~

Сайт Robo-Tom разработан студентами Московского Физико-Технического Института (Государственного Университета) при поддержке сотрудников Института Кристаллографии им. А.В. Шубникова Российской Академии Наук. Сайт представляет собой web-интерфейс удалённого управления лабораторным томографом с возможностью юстировки томографа, автоматизации проведения проведения экспериментов и просмотра полученных данных.

Регистрация
~~~~~~~~~~~

**Регистрация**

Проводить эксперименты, просматривать записи хранилища и использовать функционал Tomo-Rec могут только зарегистрированные пользователи. Ссылка на страницу регистрации находится на верхней панели сайта.

Форма регистрации содержит следующие поля:
* Имя пользователя*
* Email*
* Пароль*
* ФИО*
* Пол
* Телефон
* Адрес
* Место учебы/работы
* Звание
Звёздочкой отмечены *необходимые* поля. После успешного заполнения формы на адрес электронной почты, указанный при регистрации, отправляется электронное письмо. Если письмо не приходит в течение получаса, проверьте папку “Спам”. Для получения полноценного доступа к функционалу сайта необходимо пройти по ссылке, содержащейся в письме. 
После этого пользователю автоматически присваивается роль “Гость”, и он получает доступ к личному кабинету, ссылка на который для зарегистрированных пользователей также расположена на верхней панели сайта. 
Для изменения роли можно заполнить форму, которая автоматически открывается после подтверждения электронного адреса.


**Возможные роли**:

* Гость
Зарегистрированный пользователь, подтвердивший свой электронный адрес. Имеет доступ к данным хранилища, личному кабинету и информации о разработчиках (остальные роли также имеют эти базовые права).
* Исследователь
Имеет доступ к функционалу Tomo-Rec.
* Экспериментатор
Имеет полный функциональный доступ к страницам юстировки и проведения эксперимента.
* Администратор
Имеет доступ к странице управления запросами на смену ролей, не имеея привилегий Экспериментатора и Исследователя.

Запросы смены ролей
~~~~~~~~~~~~~~~~~~~

**Смена ролей**

Если новая роль не была затребована пользователем сразу после регистрации или текущая роль больше не соответствует потребностям пользователя, можно запросить смену повторно. Для этого нужно пройти по ссылке “послать новую заявку на изменение роли на сайте”, расположенную в личном кабинете и заполнить форму. 

При подтверждении или отклонении роли администратором, об итогах рассмотрения заявки пользователю направляется электронное письмо. Если заявка была отклонена, роль пользователя остаётся без изменений. Текущую роль и наличие активной нерассмотренной заявки в любой момент можно увидеть в личном кабинете.

**Доступ к странице управления запросами**

Доступ имеют пользователи с ролью *Администратор*

**Описание страницы управления запросами**

На странице представлен список пользователей, отправивших запрос на смену роли с описанием. Для подтверждения/отказа в смене роли нужно нажать кнопку Принять/Отклонить (справа от соответствующей заявки). В зависимости от успешности совершения действия на странице отобразится соответствующее информационное сообщение.

Страница эксперимента
~~~~~~~~~~~~~~~~~~~~~

**Доступ**

Доступ к странице эксперимента имеют пользователи с ролями *Администратор*, *Экспериментатор*

**Описание**

Документация к странице эксперимента
=====================================

Здесь представлены описание вcех кнопок и полей, находящихся на странице эксперимента.
На странице представлены 4 кнопки:*Включить источник*, *Выключить источник*, *Параметры томографа* и *Параметры эксперимета*. Далее будет описана каждая кнопка.

**Включить источник**

Проверяет подключение к томографу и включает источник рентгеновского излучения(неактивна, если источник включён).

**Выключить источник**

Выключает источник рентгеновского излучения(неактивна, если источник выключен).

**Параметры томографа**

Переходит на страницу юстировки томографа.

**Параметры эксперимета**

Переходит на страницу параметров эксперимента.

Страница юстировки томографа
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Переход на страницу юстировки томографа осуществляется нажатием кнопки *Параметры томографа*. На странице присутствует 7 разделов:*Напряжение*, *Ток*, *Подвинуть по горизонтали*, *Подвинуть по вертикали*, *Изменить угловое положение*, *Заслонка*, *Экспозиция*. Далее будет описан каждый раздел.

**Напряжение**

Содержит 1 поле и 1 кнопку.

Поле типа *number*. Задаёт напряжение на томографе, напряжение измеряется в кВ. Значение можно задавать в интервале от 2 до 60 кВ. Значения принимаются в вещественном типе с точностью до 0.01. Фиксируем изменения кнопкой *Отправить* типа *submit*.

**Ток**

Содержит 1 поле и 1 кнопку.

Поле типа *number*. Задаёт силу тока на томографе, сила тока измеряется в мА. Значение можно задавать в интервале от 2 до 80 мА. Значения принимаются в вещественном типе с точностью до 0.01. Фиксируем изменения кнопкой *Отправить* типа *submit*.

**Подвинуть образец по вертикали**

Содержит 1 поле и 1 кнопку.

Поле типа *number*. Двигает образец по вертикали. Значения принимаются в вещественном типе с точностью до 0.01. Фиксируем изменения кнопкой *Подвинуть образец* типа *submit*.

**Подвинуть образец по горизонтали**

Содержит 1 поле и 1 кнопку.

Поле типа *number*. Двигает образец по горизонтали. Значения принимаются в вещественном типе с точностью до 0.01. Фиксируем изменения кнопкой *Подвинуть образец* типа *submit*.

**Изменить угловое положение**

Содержит 1 поле и 2 кнопки.

Поле типа *number*. Устанавливает новое угловое положение объекта(в градусах). Значения принимаются в вещественном типе с точностью до 0.01. Фиксируем изменения кнопкой *Повернуть*. Кнопка *Принять текущее угловое положение за 0* типа *submit* - принимает текущее угловое полжение объекта за 0 градусов.

**Заслонка**

Содержит 2 кнопки типа *radio* и 1 кнопку типа *submit*.

Кнопки *Открыть*/*Закрыть* типа *radio* - переключают заслонку в положение *открыта*/*закрыта*. Фиксируем изменения кнопкой *Установить заслонку* типа *submit*.

**Экспозиция**

Содержит 1 поле и 1 кнопку.

Поле типа *number*. Устанавливает экспозицию, экспозиция измеряется в мс. Значение можно задавать в интервале от 0.1 до 16000 мс. Кнопка *Предпросмотр* - снимает изображение с заданной экспозицией. Изображение отображается в правом углу экрана.

Страница параметров эксперимента
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Переход на страницу параметров эксперимента осуществляется нажатием кнопки *Параметры эксперимента*. На странице присутствует 4 раздела:*Параметры образца*, *Кадры DARK*, *Кадры EMPTY*, *Кадры DATA* и 2 кнопки:*Начать эксперимент*, *Закончить эксперимент*. Далее будет описан каждый раздел и каждая кнопка.

**Параметры образца**

Содержит 2 поля типа *text*:*Название образца* и *Теги*. Позволяют ввести название образца и теги.

**Кадры DARK**

Содержит 2 поля типа *number*. Поле *Количество* задаёт количество кадров DARK. Принимает целочисленные значения. Поле *Экспозиция* задаёт экспозицию кадров DARK, экспозиция измеряется в мс. Значение можно задавать в интервале от 0.1 до 7000 мс. Значения принимаются в вещественном типе с точностью до 0.1.

**Кадры EMPTY**

Содержит 2 поля типа *number*. Поле *Количество* задаёт количество кадров EMPTY. Принимает целочисленные значения. Поле *Экспозиция* задаёт экспозицию кадров EMPTY, экспозиция измеряется в мс. Значение можно задавать в интервале от 0.1 до 7000 мс. Значения принимаются в вещественном типе с точностью до 0.1.

**Кадры DATA**

Содержит 4 поля типа *number*. Поле *Количество* задаёт количество кадров DATA. Принимает целочисленные значения. Поле *Экспозиция* задаёт экспозицию кадров DATA, экспозиция измеряется в мс. Значения принимаются в вещественном типе с точностью до 0.1. Поле *Угловой шаг* задаёт угловой шаг кадров DATA, угловой шаг измеряется в градусах. Значения принимаются в вещественном типе с точностью до 0.01. Поле *Кадров на угол поворота* задаёт количество кадров DATA на угол поворота. Принимает целочисленные значения.

**Кнопка начать эксперимент**

Кнопка типа *submit*. Начинает эксперимент с заданными параметрами.

**Кнопка закончить эксперимент**

Кнопка типа *submit*. Заканчивает текущий эксперимент. 


Хранилище
~~~~~~~~~

**Доступ**

Доступ к странице хранилища имеют все зарегистрированные пользователи.

**Поиск**

При открытии страницы хранилища отображаются все эксперименты, находящиеся в базе.
Чтобы отфильтровать результаты, необходимо ввести параметры поиска в поля и нажать кнопку “Поиск”.
Для перехода на страницу конкретного эксперимента необходимо нажать на название соответствующего образца.

**Страница эксперимента**

Вверху страницы отображены основные параметры эксперимента.
Внизу страницы расположен список всех изображений эксперимента.
Сообщение в середине экрана (добавить скриншоты) отображает состояние загрузки изображений.
Как только изображения загружены, можно нажать на номер любого изображения и открыть его.
Около изображения располагается основная информация об изображении. 
Для навигации по изображениям можно использовать стрелки влево/вправо.
